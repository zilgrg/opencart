/*
 * Stepper Plugin [Formstone Library]
 * @author Ben Plum
 * @version 0.1.2
 *
 * Copyright Â© 2012 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(f){function r(a){a=a||{};isMobile&&(a.trueMobile=!0,"undefined"===typeof a.mobile&&(a.mobile=!0));a=f.extend({},j,a);for(var c=f(this),k=0,d=c.length;k<d;k++){var b=c.eq(k),e=a;if(!b.data("stepper")){var g=parseFloat(b.attr("min")),l=parseFloat(b.attr("max")),m=parseFloat(b.attr("step"))||1;b.addClass("stepper-input").wrap('<div class="stepper '+e.customClass+'" />').after('<span class="stepper-step up">Up</span><span class="stepper-step down">Down</span>');var h=b.parent(".stepper");b.is(":disabled")&& h.addClass("disabled");e=b=f.extend({$stepper:h,$input:b,$steps:h.find(".stepper-steps"),min:void 0!==typeof g&&!isNaN(g)?g:!1,max:void 0!==typeof l&&!isNaN(l)?l:!1,step:void 0!==typeof m&&!isNaN(m)?m:1},e);g=new String(b.step);g=-1<g.indexOf(".")?g.length-g.indexOf(".")-1:0;e.digits=g;h.on("mousedown.stepper",".stepper-step",b,s).data("stepper",b)}}return c}function s(a){a.preventDefault();a.stopPropagation();n();var c=a.data;c.$stepper.hasClass("disabled")||(a=f(a.target).hasClass("up"),p(c,a,!0), f("body").on("mouseup.stepper",c,t))}function t(a){a.preventDefault();a.stopPropagation();n()}function p(a,c,f){var d=parseFloat(a.$input.val()),d=void 0!==typeof d&&!isNaN(d)?d:0,b=d+(c?a.step:-a.step);!1!==a.min&&b<a.min&&(b=a.min);!1!==a.max&&b>a.max&&(b=a.max);b!=d&&(d=b,b=Math.pow(10,a.digits),b=Math.round(d*b)/b,a.$input.val(b).trigger("change"),d=b);f&&(e=setInterval(function(){p(a,c,!1)},125))}function n(){void 0!==typeof e&&(clearInterval(e),e=null);f("body").off(".stepper")}isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent|| navigator.vendor||window.opera);var j={customClass:""},e=null,q={defaults:function(a){j=f.extend(j,a||{});return f(this)},disable:function(){for(var a=f(this),c=0,e=a.length;c<e;c++){var d=a.eq(c),b=d.parent(".stepper");d.attr("disabled","disabled");b.addClass("disabled")}return a},enable:function(){for(var a=f(this),c=0,e=a.length;c<e;c++){var d=a.eq(c),b=d.parent(".stepper");d.attr("disabled",null);b.removeClass("disabled")}return a},destroy:function(){for(var a=f(this),c=0,e=a.length;c<e;c++){var d= a.eq(c);d.parent(".stepper").off(".stepper").find(".stepper-step").remove();d.unwrap().removeClass("stepper-input")}return a}};f.fn.stepper=function(a){return q[a]?q[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"===typeof a||!a?r.apply(this,arguments):this}})(jQuery);