<?php class breadAndPath extends Controller { private $pathController;function __construct(){ global $registry;parent::__construct($registry);require_once DIR_CONFIG.'ssb_library/catalog/tools/path_controller.php';$this->pathController=pathController::getInstance();} static private $Instance =NULL;static public function getInstance() { if(self::$Instance==NULL){ $class=__CLASS__;self::$Instance=new $class;} return self::$Instance;} public function getProductBreadcrumb($breadData,$mode,$reverse=false,$addTite=false,$homeToStore=false){ if($mode=='default'){ return $breadData;} $revers_text_separator=' &laquo; ';$text_home=$this->language->get('text_home');if($homeToStore){ $text_home=$this->config->get('config_name');} if($addTite){ $text_home.=" | ".$this->config->get('config_title');} $separator=$reverse ? $revers_text_separator:false;$first=array( 'text'=> $text_home,'href'=> $this->url->link('common/home'),'separator'=> $separator);$separator=!$reverse ? $this->language->get('text_separator'):false;$last=$breadData[count($breadData)-1];$last['separator']=$separator;$breadResult=array();$breadResult[]=$first;if($mode !='direct'){ $productPaths=$this->pathController->getProductPath($this->request->get['product_id'],$mode);foreach($productPaths as $productPath){ $breadResult[]=array( 'text'=> $productPath['name'],'href'=> $this->url->link('product/category','path='.$productPath['path']),'separator'=> $reverse ? $revers_text_separator:$this->language->get('text_separator'));} } $breadResult[]=$last;if($reverse){ $breadResult=array_reverse($breadResult);} return $breadResult;} public function getCategoryBreadcrumb($category_id,$breadData,$mode,$reverse=false,$addTite=false,$homeToStore=false){ if($mode=='default'){ return $breadData;} $revers_text_separator=' &laquo; ';$text_home=$this->language->get('text_home');if($homeToStore){ $text_home=$this->config->get('config_name');} if($addTite){ $text_home.=" | ".$this->config->get('config_title');} $separator=$reverse ? $revers_text_separator:false;$first=array( 'text'=> $text_home,'href'=> $this->url->link('common/home'),'separator'=> $separator);$separator=!$reverse ? $this->language->get('text_separator'):false;$last=$breadData[count($breadData)-1];$last['separator']=$separator;$breadResult=array();$breadResult[]=$first;if($mode !='direct'){ $categoryPaths=$this->pathController->getCaregoryPath($category_id,$mode);foreach($categoryPaths as $categoryPath){ $breadResult[]=array( 'text'=> $categoryPath['name'],'href'=> $this->url->link('product/category','path='.$categoryPath['path']),'separator'=> $reverse ? $revers_text_separator:$this->language->get('text_separator'));} if($reverse){ $breadResult[count($breadResult)-1]['separator']=false;} }else{ $breadResult[]=$last;} if($reverse){ $breadResult=array_reverse($breadResult);} return $breadResult;} } ?>
